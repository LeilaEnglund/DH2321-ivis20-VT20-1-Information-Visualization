var x = {"siriusblack": {"survey_info": [["Sirius Black", "Movies, games, cooking", "5", "4", "4", "3", "5"], ["Movies"]], "interests": ["Movies"], "skills": [5, 4, 4, 3, 5]}, "irmapince": {"survey_info": [["Irma Pince", "Cats, TV series", "5", "10", "3", "7", "6"], ["Movies"]], "interests": ["Movies"], "skills": [5, 10, 3, 7, 6]}, "amosdiggory": {"survey_info": [["Amos Diggory", "movies & tv, travelling, geography, science, art", "6", "1", "7", "9", "9"], ["Movies"]], "interests": ["Movies"], "skills": [6, 1, 7, 9, 9]}, "peterpettigrew": {"survey_info": [["Peter Pettigrew ", "I would say my largest interest/hobby is movies, both new and old. Other than that I am also interested in plants and trying new things with my friends. ", "6", "2", "3", "8", "10"], ["Movies"]], "interests": ["Movies"], "skills": [6, 2, 3, 8, 10]}, "cormacmclaggen": {"survey_info": [["Cormac McLaggen", "Music, movies, design, audio", "3", "3", "2", "7", "7"], ["Movies"]], "interests": ["Movies", "Design", "Music"], "skills": [3, 3, 2, 7, 7]}, "rowenaravenclaw": {"survey_info": [["Rowena Ravenclaw", "I like listening to music and DJing. Movies, TV-shows, football (soccer) interest me.", "4", "5", "6", "6", "7"], ["Movies"]], "interests": ["Movies", "Sports", "Music"], "skills": [4, 5, 6, 6, 7]}, "phineasnigellusblack": {"survey_info": [["Phineas Nigellus Black", "Movies, music, gym (going to the supermarket) ", "6", "1", "7", "4", "7"], ["Movies"]], "interests": ["Movies", "Sports", "Music"], "skills": [6, 1, 7, 4, 7]}, "demelzarobins": {"survey_info": [["Demelza Robins ", "Every lesson of computer science attracted my attention. I have many hobbies like running, , traveling, professional photography, watching movies and TV series, reading books, recording music, playing guitar etc.", "6", "4", "7", "5", "8"], ["Movies"]], "interests": ["Movies", "Sports", "Music", "Programming"], "skills": [6, 4, 7, 5, 8]}, "penelopeclearwater": {"survey_info": [["Penelope Clearwater ", "I like to analyse data and present them in visually interesting ways. I read books and news articles. ", "2", "4", "5", "4", "8"], ["Design"]], "interests": ["Design"], "skills": [2, 4, 5, 4, 8]}, "hannahabbott": {"survey_info": [["Hannah Abbott ", "Friendly and approachable. Have an easy time for understanding smaller details. Game Design have been my specific interest for the last few years, have done a bit of game dev myself. My main hobbies (outside of game dev) at the moment are acting and dancing.", "3", "4", "4", "3", "6"], ["Design"]], "interests": ["Design"], "skills": [3, 4, 4, 3, 6]}, "bathildabagshot": {"survey_info": [["Bathilda Bagshot ", "\"Travel, admire landscapes, photography, understand mass and companies market choices (e.g. The real reasons why Instagram hides \"\"likes\"\" number on its app, thy people love a certain brand and what it gives to them), UI design, understand user needs and experience, slow reading, free climbing, play electric bass guitar, manage a summer camp and be involved as an entertainer.\"", "3", "4", "6", "3", "6"], ["Design"]], "interests": ["Design", "Sports", "Music"], "skills": [3, 4, 6, 3, 6]}, "jamespotter": {"survey_info": [["James Potter ", "I'm an exchange student from the Eindhoven University of Technology. I'm enrolled in the master program called HTI - Human Technology Interaction. I'm driven by shaping innovative designs so that they could solve currently existing, or future problems for society. My hobbies are skiing, windsurfing, and drawing.", "3", "8", "1", "8", "7"], ["Design"]], "interests": ["Design", "Sports"], "skills": [3, 8, 1, 8, 7]}, "charityburbage": {"survey_info": [["Charity Burbage", "I like painting with oil and acrylics. I work as an app developer but Will finish my masters anyway. The app I am working with is mostly about visualising data, with d3 for instance. Looking forward to become better at it", "4", "8", "7", "4", "7"], ["Design"]], "interests": ["Design"], "skills": [4, 8, 7, 4, 7]}, "gellertgrindelwald": {"survey_info": [["Gellert Grindelwald ", "I like to create stuff. It\u2019s the process and problem solving that I find interesting. Medium, tools or purpose doesn't really matter.", "4", "8", "3", "3", "3"], ["Design"]], "interests": ["Design"], "skills": [4, 8, 3, 3, 3]}, "remuslupin": {"survey_info": [["Remus Lupin", "art, climbing, creative realization of hci", "4", "6", "6", "7", "3"], ["Design"]], "interests": ["Design", "Sports"], "skills": [4, 6, 6, 7, 3]}, "minervamcgonagall": {"survey_info": [["Minerva McGonagall", "Photography and design (interior, clothing, digital)", "4", "8", "6", "8", "9"], ["Design"]], "interests": ["Design"], "skills": [4, 8, 6, 8, 9]}, "amycuscarrow": {"survey_info": [["Amycus Carrow", "I like art, painting, drawing and work with Photoshop in my spare time. I want to learn more programming, especially JavaScript at the moment. ", "5", "9", "5", "5", "10"], ["Design"]], "interests": ["Design", "Programming"], "skills": [5, 9, 5, 5, 10]}, "reginaldcattermole": {"survey_info": [["Reginald Cattermole", "My interests are design(in all forms and shapes) and dancing :)", "5", "7", "7", "8", "10"], ["Design"]], "interests": ["Design"], "skills": [5, 7, 7, 8, 10]}, "rubeushagrid": {"survey_info": [["Rubeus Hagrid ", "Urban mobility, spatio-temporal clustering, visualization, family", "6", "6", "7", "2", "4"], ["Design"]], "interests": ["Design"], "skills": [6, 6, 7, 2, 4]}, "ameliabones": {"survey_info": [["Amelia Bones ", "I love playing computer games my favorite game is Cities skyline, close followed by Dota 2. I love UX-design, and smart solutions within the design. I wish I was the one who invented the green button on the phone when you want to call some one. I have worked mostly with web pages and apps. I also work part time for the Sas Scandinavian Airlines were I help them gater and present data from there big database in a way that makes sense and can easily be understood and I love it. My main tool at work is power bi, sql and excel", "7", "2", "4", "4", "9"], ["Design"]], "interests": ["Design"], "skills": [7, 2, 4, 4, 9]}, "michaelcorner": {"survey_info": [["Michael Corner", "I love to work out, eat good food and skiing, among other things. I'm mostly interested in design at a higher level, service- and concept design in relation to sustainability. ", "5", "7", "1", "8", "10"], ["Design"]], "interests": ["Design", "Sports"], "skills": [5, 7, 1, 8, 10]}, "bellatrixlestrange": {"survey_info": [["Bellatrix Lestrange", "I will be attracted by some creative ideas. I'm always searching for the newest, most interesting and unique products. I'm curious about the world and want to experience a lot of things in my life, such as parachute jumping and some other exciting sports.", "7", "6", "2", "4", "7"], ["Design"]], "interests": ["Design", "Sports"], "skills": [7, 6, 2, 4, 7]}, "pansyparkinson": {"survey_info": [["Pansy Parkinson", "Videogames, boardgames, training, volleyball, painting, editing ", "7", "7", "8", "6", "8"], ["Design"]], "interests": ["Design", "Sports"], "skills": [7, 7, 8, 6, 8]}, "igorkarkaroff": {"survey_info": [["Igor Karkaroff ", "New topics interest me. Before I began studying Design I studied Computer Science; before that I studied Latin and Classical Civilizations. My favorite hobby is to find new hobbies - I have done a plethora of things including piano, archery, magic, massage, and dance.", "5", "6", "6", "4", "9"], ["Design"]], "interests": ["Design", "Sports", "Music", "Programming"], "skills": [5, 6, 6, 4, 9]}, "erniemacmillan": {"survey_info": [["Ernie Macmillan", "\"I am passionate about technology and self improvement. I meditate regularly."], ["Sports"]], "interests": ["Sports"], "skills": [1,1,10,8,5]}, "corneliusfudge": {"survey_info": [["Cornelius Fudge", "I like machine learning and programming. I am interested in being active and powerlifting. ", "4", "3", "7", "1", "4"], ["Sports"]], "interests": ["Sports", "Programming"], "skills": [4, 3, 7, 1, 4]}, "chochang": {"survey_info": [["Cho Chang ", "Photography, kick-boxing, craft beer:)", "5", "1", "5", "3", "8"], ["Sports"]], "interests": ["Sports"], "skills": [5, 1, 5, 3, 8]}, "nevillelongbottom": {"survey_info": [["Neville Longbottom", "I like hanging out with friend and perhaps do some activity of some sort or play video games is a lot of fun. I also have a dog which includes long walks which I think is very nice. ", "5", "5", "5", "4", "7"], ["Sports"]], "interests": ["Sports"], "skills": [5, 5, 5, 4, 7]}, "dracomalfoy": {"survey_info": [["Draco Malfoy", "Basketball, Formula 1, travelling, photography, reading, JRR Tolkien", "5", "5", "7", "6", "10"], ["Sports"]], "interests": ["Sports"], "skills": [5, 5, 7, 6, 10]}, "tommarvoloriddle": {"survey_info": [["Tom Marvolo Riddle", "23 years old from Sweden, lived in Portugal for a year working with marketing. My hobbies include beauty and ice hockey. I am interested in developing my programming skills.", "5", "5", "5", "5", "10"], ["Sports"]], "interests": ["Sports", "Programming"], "skills": [5, 5, 5, 5, 10]}, "cuthbertbinns": {"survey_info": [["Cuthbert Binns", "Gaming, Reddit, Instagram, CrossFit", "6", "4", "8", "4", "7"], ["Sports"]], "interests": ["Sports"], "skills": [6, 4, 8, 4, 7]}, "grahammontague": {"survey_info": [["Graham Montague", "photography, videography, technology, science, arts, music, analog photography, basket, football, books, computers, make things ", "6", "8", "2", "7", "9"], ["Sports"]], "interests": ["Sports", "Music"], "skills": [6, 8, 2, 7, 9]}, "garrickollivander": {"survey_info": [["Garrick Ollivander ", "I'm interested in how we can use technology in order to live more environmentally sustainable. My non-study related hobbies are cooking, reading, and spinning. ", "6", "3", "5", "7", "9"], ["Sports"]], "interests": ["Sports"], "skills": [6, 3, 5, 7, 9]}, "vincentcrabbe": {"survey_info": [["Vincent Crabbe", "Fitness / Hiking / Guitar", "7", "3", "3", "1", "7"], ["Sports"]], "interests": ["Sports"], "skills": [7, 3, 3, 1, 7]}, "colincreevey": {"survey_info": [["Colin Creevey", "I am super interested in data and how it can be used to find underlying trends and patterns. I am also interested in environmental issues and equality questions. When it comes to hobbies I enjoy hiking and adventures in nature as well as traveling and taking care of my plants. Food is also a huge interest for me.", "7", "6", "5", "3", "9"], ["Sports"]], "interests": ["Sports", "Music"], "skills": [7, 6, 5, 3, 9]}, "lilypotter": {"survey_info": [["Lily Potter", "Music, Fashion, Sports", "5", "6", "3", "7", "8"], ["Sports"]], "interests": ["Sports", "Music"], "skills": [5, 6, 3, 7, 8]}, "theodorenott": {"survey_info": [["Theodore Nott", "Computer games, music, snowboarding, nature, and more.", "5", "8", "6", "3", "6"], ["Sports"]], "interests": ["Sports", "Music"], "skills": [5, 8, 6, 3, 6]}, "katiebell": {"survey_info": [["Katie Bell ", "I've been a software developer for about 12 years, and I'm looking to make a career change into more research related work. I am also a martial artist and an (almost) certified martial arts instructor, and a mediocre bass and guitar player.", "6", "6", "10", "4", "4"], ["Sports"]], "interests": ["Sports", "Music", "Programming"], "skills": [6, 6, 10, 4, 4]}, "susanbones": {"survey_info": [["Susan Bones ", "Sports, stock, software development, business", "4", "5", "6", "4", "7"], ["Sports"]], "interests": ["Sports", "Programming"], "skills": [4, 5, 6, 4, 7]}, "lavenderbrown": {"survey_info": [["Lavender Brown", "I like to program in general, especially front end. On my spare time I go to the gym and hang with friends. ", "4", "5", "5", "2", "7"], ["Sports"]], "interests": ["Sports", "Programming"], "skills": [4, 5, 5, 2, 7]}, "marycattermole": {"survey_info": [["Mary Cattermole ", "I like programming, especially web programming. I am also into sports and nutrition.", "4", "1", "5", "2", "10"], ["Sports"]], "interests": ["Sports", "Programming"], "skills": [4, 1, 5, 2, 10]}, "silvanuskettleburn": {"survey_info": [["Silvanus Kettleburn ", "Music, Art, Animals, Human rights, Environmental issues", "4", "5", "4", "5", "10"], ["Music"]], "interests": ["Music"], "skills": [4, 5, 4, 5, 10]}, "rolandahooch": {"survey_info": [["Rolanda Hooch ", "My hobbies include: playing  music: both guitar and piano, anime, videogames. ", "5", "5", "6", "6", "10"], ["Music"]], "interests": ["Music"], "skills": [5, 5, 6, 6, 10]}, "hermionegranger": {"survey_info": [["Hermione Granger", "Music and sound production", "5", "1", "4", "8", "7"], ["Music"]], "interests": ["Music"], "skills": [5, 1, 4, 8, 7]}, "poppypomfrey": {"survey_info": [["Poppy Pomfrey ", "Creating stuff, listening to music, and dancing.", "5", "3", "7", "4", "8"], ["Music"]], "interests": ["Music"], "skills": [5, 3, 7, 4, 8]}, "ludobagman": {"survey_info": [["Ludo Bagman ", "My main general interest is music. Recently I have been reading a book with a lot of data representations and it reminded me that data visualization is something I would like to learn more about (also because I like design). My main technical interest is multimedia processing because I like applied maths and multimedia analysis (originally I started my bachelor because of audio, but now I actually prefer image).", "6", "4", "6", "1", "10"], ["Music"]], "interests": ["Music"], "skills": [6, 4, 6, 1, 10]}, "millicentbulstrode": {"survey_info": [["Millicent Bulstrode", "My main interest is music, as a hobby I regularly play with a swing orchestra. I'm also interested in how far technology can reach in making people interact with it and how people can interact among themselves using technology, hence my decisione to join a interactive technology related faculty.", "6", "5", "2", "4", "6"], ["Music"]], "interests": ["Music"], "skills": [6, 5, 2, 4, 6]}, "helgahufflepuff": {"survey_info": [["Helga Hufflepuff", "I am interested in music and play the piano, guitar, bass and sing. I have now started to translate this to media technology by learning about sound and music interaction through technology. I'm also a smart home enthusiast and have started to make my home smart, starting with lights and switches. ", "6", "3", "6", "5", "8"], ["Music"]], "interests": ["Music"], "skills": [6, 3, 6, 5, 8]}, "seamusfinnigan": {"survey_info": [["Seamus Finnigan", "I'm interested in pretty much everything relating to the brain, cognition, and consciousness: neuroscience, philosophy, psychology, information technology. I spend most of my free time on nurturing these interests. I also like to listen to a lot of music (mostly hip hop) and sometimes play the piano.", "7", "3", "7", "2", "8"], ["Music"]], "interests": ["Music"], "skills": [7, 3, 7, 2, 8]}, "xenophiliuslovegood": {"survey_info": [["Xenophilius Lovegood ", "I interested in music and something looks funny. I love singing, doing some sports and traveling.", "7", "5", "8", "5", "9"], ["Music"]], "interests": ["Music"], "skills": [7, 5, 8, 5, 9]}, "albusdumbledore": {"survey_info": [["Albus Dumbledore", "\"My main interests outside of school are cooking, music (consuming, I'm not talented enough to create), and reading. I occasionally play video games or exercise, but they're not really \"\"passions\"\"\"", "8", "1", "5", "7", "9"], ["Music"]], "interests": ["Music"], "skills": [8, 1, 5, 7, 9]}, "sturgispodmore": {"survey_info": [["Sturgis Podmore ", "\"In terms of possible professional areas, I'm interested in news communication/reporting, free speech issues, language, streaming services, assistive technologies and most things relating to food."], ["Music"]], "interests": ["Music", "Programming"], "skills": [3,3,1,3,7]}, "antiochpeverell": {"survey_info": [["Antioch Peverell", "\"* I'm studying my forth year at KTH* I have chosen the route of sustainable media technology in my bachelors * therefore been exposed more to humanities- than programming oriented courses* Deeply interested in Sustainability issues* interested in how to communicate data on sustainability efficiently\"", "3", "5", "1", "6", "8"], ["Programming"]], "interests": ["Programming"], "skills": [3, 5, 1, 6, 8]}, "frankbryce": {"survey_info": [["Frank Bryce", "I like programming especially front-end! ", "4", "1", "5", "3", "8"], ["Programming"]], "interests": ["Programming"], "skills": [4, 1, 5, 3, 8]}, "terryboot": {"survey_info": [["Terry Boot", "Game development", "5", "7", "6", "3", "7"], ["Programming"]], "interests": ["Programming"], "skills": [5, 7, 6, 3, 7]}, "marcusflint": {"survey_info": [["Marcus Flint", "From a career perspective, I am interested in UX design and frontend development. Art is a hobby. ", "5", "8", "4", "2", "10"], ["Programming"]], "interests": ["Programming"], "skills": [5, 8, 4, 2, 10]}, "viktorkrum": {"survey_info": [["Viktor Krum", "Front end developing and web design ", "5", "6", "7", "6", "7"], ["Programming"]], "interests": ["Programming"], "skills": [5, 6, 7, 6, 7]}, "fleurdelacour": {"survey_info": [["Fleur Delacour ", "Interested in making computer games.", "7", "9", "8", "8", "9"], ["Programming"]], "interests": ["Programming"], "skills": [7, 9, 8, 8, 9]}, "quirinusquirrell": {"survey_info": [["Quirinus Quirrell", "Photography, computer games, game development", "7", "8", "7", "3", "7"], ["Programming"]], "interests": ["Programming"], "skills": [7, 8, 7, 3, 7]}, "alectocarrow": {"survey_info": [["Alecto Carrow", "Game development, figure skating, playing games", "8", "4", "7", "3", "9"], ["Programming"]], "interests": ["Programming"], "skills": [8, 4, 7, 3, 9]}}
var objArray = [];
//Math, Drawing, Programming, UXE, Communication This is the order in which the questions appear (skills). 
var desiredSkillSet = ['','','','',''];
var colorRange = ['steelyellow','#90eb9d','#00ccbc','#00a6ca','#2c7bb6']
var colorRangeGrps = ['#1bddcb','#99d8d8','#f4f1bb','#c1d1e9','#e6ebe0','#729fca','#27a9d9','#69738b','#8b94aa','#ed6a5a'];
var colorA = d3.scaleLinear()
    .domain([1,3,5,7,10])
    .range(colorRange);
function retColor(maxV,val)
{
	var colorB = d3.scaleLinear()
    .domain([0,maxV])
    .range(colorRange);
    return colorB(val);
}
function fillObjArray(obj) {
    var c = 0;
    let ind = [];
    let i = 0, j = 0;
    let content = '<table id="cont-table"> <div class="table-responsive table-sm">';
    content += '<thead><tr class="bg-dark text-white" id="cooler"> <th scope="col">Name</th>';
    let intrsts=''
    for (let el of desiredSkillSet){
    	if (el != ''){
    		ind[j] = i;
    		j++;
    		content +='<th scope="col">'+el+' </th>';
    	}
    	i++; 
    }
    content +='<th scope="col">Average</th>'
    content +='<th scope="col">Interests</th>'
    content += '</tr></thead>'
    content += '<tbody>'
    console.log(ind);
    var vertAvg = new Array(ind.length+1).fill(0);
    for(var prop in obj){
    	var avg = 0 ;
        if(obj.hasOwnProperty(prop)){
            ++c;
            content += '<tr>';
            	content += '<td class="name">'+obj[prop]['survey_info'][0][0].toString()+'</td>';
            let kk = 0;
            for(index of ind)
            {	
            	avg = avg+obj[prop]['skills'][index];
            	vertAvg[kk] = vertAvg[kk] +  obj[prop]['skills'][index];
            	content += '<td class="c'+kk.toString()+'">'+obj[prop]['skills'][index]+'</td>';
            	++kk;
            }
            vertAvg[kk] = vertAvg[kk]+avg/ind.length;

          	content += '<td class="c'+kk.toString()+'">'+(avg/ind.length).toFixed(2).toString()+'</td>';
            content += '<td class="int">'+obj[prop]['interests'].join(',')+'</td>';
            content += '</tr>';
            objArray.push({'name':obj[prop]['survey_info'][0][0].toString(),'info':obj[prop],'avgsk':avg/(ind.length),'intrsts':retrieveInterestsCount(baseInterests,obj[prop]['interests'].join(','))});        	
        }
    }
    content += '<tr class="bg-dark text-white"id="coolio"><td><b>Averages</b></td>';
    for (let ky = 0; ky<ind.length+1;ky++){
    	content+= '<td>'+(vertAvg[ky]/60).toFixed(2)+'</td>'; 
    }
    content += '<td></td>'
    console.log(c);
    content += '</tr></tbody></table></div>';
    $('.visualize').append(content);
    setColorsV(ind.length+1,vertAvg);
    objArray=orderBasedOnSkillSet(objArray);
    $('#cont-table').remove();
    genTable(objArray.reverse());
    $('.visualize').append('<button class="btn btn-lg btn-info fixed-top intt" style="margin-left:90%; display:none;" id="btnContInt">Interests</button>');
     $('.visualize').append('<button class="btn btn-lg btn-info fixed-bottom" style="margin-left:90%; display:none;" id="btnCont2">Groups</button>');
     $('#btnContInt').show('slow');
     $('#btnContInt').click(function(){
     	$('#btnContInt').toggleClass('intt');
     	$('#GroupsDisplay').hide('fast');
     	if($(this).hasClass('intt'))
     	{
     		$(this).text('Interests!');
     		objArray = orderBasedOnSkillSet(objArray);
     		$('#cont-table').remove();
     		genTable(objArray.reverse());
     		setColorsV(1*(ind.length+1),vertAvg);
     		$('#btnCont2').hide('fast');
     	}
     	else
     	{
     		objArray = orderBasedOnSkillSetandInterests(objArray);
     		$(this).text('Skills!');
     		$('#cont-table').remove();
     		genTable(objArray.reverse());
     		setColorsV(-1*(ind.length+1),vertAvg);
     		$('#btnCont2').show('fast');
 	$("#tbGroups").find('td[data-target]').on('click', function(){
 		let txtc = '';
 		$('li').remove();
 		$('.modal-title').text('Group '+$(this).data('id'));
    	for (let ku = 0+(parseInt($(this).data('id'))-1)*6; ku< parseInt($(this).data('id'))*6;ku++)
    	{
    		txtc += '<li class="'+objArray[ku]['name'].toLowerCase().replace(/\s/g, '')+'">'+objArray[ku]['name']+'</li>';
    	}
    	$('ul').append(txtc);
    	$('li').click(function(){
    		$('rect').remove();
    		$('g').remove();
    		$('text').remove();
			plottyBoy($(this).attr('class'));
		});
    	$('#Modal').modal('show');
    });
    $('#cModal').click(function(){
    	$('li').remove();
    	$('text').remove();
    	$('rect').remove();
    	$('g').remove();
    });
     	}
     });
   $('#btnCont2').click(function(){
   		$('#btnContInt').text('Previous')
   		$('#cont-table').remove();
   		$('#GroupsDisplay').show('fast');
   		$('li').remove();
   		$(this).hide();
   });  
    return c;
}
function setColorsV(kk,vertAvg)
{
	let c = 0;
	let s = '';
	(kk<0) ? s = 'I': s='';
	(kk<0) ? kk*=-1:kk*=1;
	for (let i = 0; i<kk+1;i++){

		for (cell of $('.c'+i)){
			
			$(cell).css('background',colorA(parseFloat(($(cell).text()))));
		}
	}
	if (s == 'I')
	{
		let ind = 1;
		let j = 0 ;
		for (let cell of $('.name'))
		{
			$(cell).css('background',colorRangeGrps[j]);
			Object.assign(objArray[ind-1],{'grp':j+1});
			if (ind%6==0)
			{
				++j;
			}
			++ind;
		}
	}
}
function orderBasedOnSkillSet(Arry){
	var objArr = Arry;
	objArr.sort(function(a, b) {return parseFloat(a.avgsk) - parseFloat(b.avgsk);});
	return objArr;

}
function orderBasedOnSkillSetandInterests(Arry){
	var objArr = Arry;
	objArr.sort(function(a, b) {return ((parseFloat(a.intrsts)*30)+ parseFloat(a.avgsk)) - (parseFloat(b.avgsk)+(parseFloat(b.intrsts)*30));});
	return objArr;
}
function genTable(objArre)
{
	var c = 0;
    let ind = [];
    let i = 0, j = 0;
    let content = '<table id="cont-table"> <div class="table-responsive table-sm">';
    content += '<thead><tr class="bg-dark text-white" id="cooler"> <th scope="col">Name</th>';
    for (let el of desiredSkillSet){
    	if (el != ''){
    		ind[j] = i;
    		j++;
    		content +='<th scope="col">'+el+' </th>';
    	}
    	i++; 
    }
    content +='<th scope="col">Average</th>';
    content +='<th scope="col">Interests</th>';
    content += '</tr></thead>';
    content += '<tbody>';
    var vertAvg = new Array(ind.length+1).fill(0);
    for(var prop of objArre){
    	var avg = 0 ;
            ++c;
            content += '<tr>';
            	content += '<td class="name">'+prop['name'].toString()+'</td>';
            let kk = 0;
            for(index of ind)
            {	
            	avg = avg+prop['info']['skills'][index];
            	vertAvg[kk] = vertAvg[kk] +  prop['info']['skills'][index];
            	content += '<td class="c'+kk.toString()+'">'+prop['info']['skills'][index]+'</td>';
            	++kk;
            }
            vertAvg[kk] = vertAvg[kk]+avg/ind.length;
          	content += '<td class="c'+kk.toString()+'">'+(avg/ind.length).toFixed(2).toString()+'</td>';
           	content += '<td class="int">'+prop['info']['interests'].join(', ')+'</td>';
            content += '</tr>';      
    }
    content += '<tr class="bg-dark text-white"id="coolio"><td><b>Averages</b></td>';
    for (let ky = 0; ky<ind.length+1;ky++){
    	content+= '<td>'+(vertAvg[ky]/60).toFixed(2)+'</td>'; 
    }
    content += '<td></td>'
    content += '</tr></tbody></table></div>';
     $('.visualize').append(content);
     setColorsV(ind.length+1,vertAvg);
}
function retrieveDesiredSkillSet(str){
	let des = str.split(',');
	des.includes('Math') 			? 	desiredSkillSet[0] = 'Math':{};
	des.includes('Drawing') 		? 	desiredSkillSet[1] = 'Drawing':{};
	des.includes('Programming')	 	? 	desiredSkillSet[2] = 'Programming':{};
	des.includes('UXE')				?	desiredSkillSet[3] = 'UXE':{};
	des.includes('Communication')	?	desiredSkillSet[4] = 'Communication':{};
	console.log('The desired skillset is: '+desiredSkillSet);
}
function retrieveInterestsCount(str,intrsts){
	let des = str.split(',');
	let cnt = 0;
	intrsts = intrsts.split(',');
	for (el of intrsts)
		des.includes(el) ? cnt+=1: cnt+=0;
	return cnt;
}
function plottyBoy(id)
{
	var sample = ['Math','Drawing','Programming','UXE','Communication'];
	let goals = [];
	let ii = 0;
	for (let el of sample)
	{
		goals[ii] = {'language':el,'value':x[id]['skills'][ii]};
		++ii;
	}
	//alert('plotting... for: '+id);
	const margin = 20;
	const width = 660 - 2 * margin;
	const height = 400 - 2 * margin;
	const svg = d3.select('svg');
	const chart = svg.append('g')
    				 .attr('transform', `translate(${margin}, ${margin})`);
 	const yScale = d3.scaleLinear()
    .range([height, 0])
    .domain([0, 10]);

    chart.append('g')
    	 .call(d3.axisLeft(yScale));
    const xScale = d3.scaleBand()
    .range([0, width])
    .domain(sample.map((s) => s))
    .padding(0.2)

	chart.append('g')
    .attr('transform', `translate(0, ${height})`)
    .call(d3.axisBottom(xScale));

    chart.selectAll()
    .data(goals)
    .enter()
    .append('rect')
    .attr('x', (s) => xScale(s.language))
    .attr('y', (s) => yScale(s.value))
    .attr('height', (s) => height - yScale(s.value))
    .attr('width', xScale.bandwidth())
    svg.append('text')
    .attr('x', width / 2 + margin)
    .attr('y', 40)
    .attr('text-anchor', 'middle')
    .text('Skills level for: '+x[id]['survey_info'][0][0]);
}
var baseInterests = '';
//retrieveDesiredSkillSet('Programming');
//fillObjArray(x);
var skillset=[];
$('#Programming1').click(function(){
	$(this).toggleClass('active');
	if ($(this).hasClass('active')){
		skillset.push('Programming'); 
	}
	else{
	   let i = skillset.indexOf('Programming');
	   if (i>-1)
	   	skillset.splice(i, 1);
	}
});
$('#Math').click(function(){
	$(this).toggleClass('active');
	if ($(this).hasClass('active')){
		skillset.push('Math'); 
	}
	else{
	   let i = skillset.indexOf('Math');
	   if (i>-1)
	   	skillset.splice(i, 1);
	}	  
});
$('#Communication').click(function(){
	$(this).toggleClass('active');
	if ($(this).hasClass('active')){
		skillset.push('Communication'); 
	}
	else{
	   let i = skillset.indexOf('Communication');
	   if (i>-1)
	   	skillset.splice(i, 1);
	} 
});
$('#UXE').click(function(){
	$(this).toggleClass('active');
	if ($(this).hasClass('active')){
		skillset.push('UXE'); 
	}
	else{
	   let i = skillset.indexOf('UXE');
	   if (i>-1)
	   	skillset.splice(i, 1);
	}
});
$('#Drawing').click(function(){
	$(this).toggleClass('active');
	if ($(this).hasClass('active')){
		skillset.push('Drawing'); 
	}
	else{
	  let i = skillset.indexOf('Drawing');
	   if (i>-1)
	   	skillset.splice(i, 1);
	}
});

var intset = [];

$('#Music').click(function(){
	$(this).toggleClass('active');
	if ($(this).hasClass('active')){
		intset.push('Music'); 
	}
	else{
	   let i = intset.indexOf('Music');
	   if (i>-1)
	   	intset.splice(i, 1);
	}
});
$('#Design').click(function(){
	$(this).toggleClass('active');
	if ($(this).hasClass('active')){
		intset.push('Design'); 
	}
	else{
	   let i = intset.indexOf('Design');
	   if (i>-1)
	   	intset.splice(i, 1);
	}
});
$('#Movies').click(function(){
	$(this).toggleClass('active');
	if ($(this).hasClass('active')){
		intset.push('Movies'); 
	}
	else{
	   let i = intset.indexOf('Movies');
	   if (i>-1)
	   	intset.splice(i, 1);
	}
});
$('#Sports').click(function(){
	$(this).toggleClass('active');
	if ($(this).hasClass('active')){
		intset.push('Sports'); 
	}
	else{
	   let i = intset.indexOf('Sports');
	   if (i>-1)
	   	intset.splice(i, 1);
	}
});
$('#Programming2').click(function(){
	$(this).toggleClass('active');
	if ($(this).hasClass('active')){
		intset.push('Programming'); 
	}
	else{
		let i = intset.indexOf('Programming');
	   if (i>-1)
	   	intset.splice(i, 1);
	}
});


$('#grpN').click(function()
	{
		if($('.visualize').hasClass('visual'))
		{
			if( skillset.length==0)
			{
				alert('You MUST select at least one skill...');
			}else{
				retrieveDesiredSkillSet(skillset.join(','));
				baseInterests=intset.join(',');
				objArray=[];
				fillObjArray(x);
				$('.visualize').toggleClass('visual');
			}
		}else{
			alert('Press the reset button');
				
		}
	});
function resetEverything(){
	if ($('#Programming1').hasClass('active'))
			$('#Programming1').toggleClass('active');
		if ($('#Math').hasClass('active'))
			$('#Math').toggleClass('active');
		if ($('#Drawing').hasClass('active'))
			$('#Drawing').toggleClass('active');
		if ($('#Communication').hasClass('active'))
			$('#Communication').toggleClass('active');
		if ($('#Math').hasClass('active'))
			$('#Math').toggleClass('active');
		if ($('#UXE').hasClass('active'))
			$('#UXE').toggleClass('active');
		if ($('#Music').hasClass('active'))
			$('#Music').toggleClass('active');
		if ($('#Drawing').hasClass('active'))
			$('#Drawing').toggleClass('active');
		if ($('#Design').hasClass('active'))
			$('#Design').toggleClass('active');
		if ($('#Programming2').hasClass('active'))
			$('#Programming2').toggleClass('active');
		if ($('#Sports').hasClass('active'))
			$('#Sports').toggleClass('active');
		if ($('#Movies').hasClass('active'))
			$('#Movies').toggleClass('active');
}
$('#reset').click(function(){
	if($('.visualize').hasClass('visual'))
	{
		{};
	}else{
		
		$('.visualize').toggleClass('visual');
	}
	baseInterests = '';
	skillset = [];
	intset = [];
	objArray = [];
	desiredSkillSet = ['','','','',''];
	$('#cont-table').remove();
	$('#btnContInt').remove();
	$('#btnCont2').remove();
	$('#GroupsDisplay').hide();
	resetEverything();
	alert('Resetted');
});


$('.modal').on('shown.bs.modal', function()
	{
		$(this).css('padding-right','40%');
	});